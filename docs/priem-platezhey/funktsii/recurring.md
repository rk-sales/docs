# Рекуррентные платежи (подписки)

Рекуррентные платежи в Robokassa позволяют автоматически списывать деньги с карты клиента по расписанию: раз в месяц, неделю, год и т.д.  
Это удобно для подписок, сервисов, рассрочек и любых регулярных оплат.

## Варианты работы с рекуррентами

В Robokassa есть два основных способа:

1. **Рекуррентные списания по API.**  
   Вы сами управляете логикой подписок на своей стороне: храните данные о подписке, запускаете списания через API, обрабатываете статусы.

2. **Готовый сервис «Подписки» в личном кабинете.**  
   Robokassa берёт на себя создание, хранение и управление подписками, а вам остаётся только добавлять подписчиков и следить за оплатами.

---

## Рекуррентные платежи по API

### Общая схема

1. Клиент один раз оплачивает заказ на платёжной странице Robokassa и соглашается с повторными списаниями.
2. Robokassa после успешной оплаты возвращает вам идентификатор для рекуррентных списаний (токен/номер операции).
3. В нужные даты ваш сервер отправляет запрос в API Robokassa на очередное списание с указанием:
   - идентификатора клиента/подписки,
   - суммы,
   - описания платежа.
4. Robokassa инициирует списание без участия клиента, а вам возвращается статус (успех, отказ, недостаточно средств и т.п.).

### Когда удобно использовать API‑подход

- Своя логика биллинга (сложные тарифы, паузы, апгрейд/даунгрейд подписки).
- Интеграция с собственной CRM или биллингом.
- Необходимость хранить и обрабатывать рекуррентные события внутри своей системы.

---

## Сервис «Подписки» в ЛК Robokassa

Сервис «Подписки» — это готовый интерфейс в личном кабинете, который помогает настроить регулярные списания без собственной биллинговой системы.

### Что можно сделать в «Подписках»

- Создать **тип подписки**:
  - задать название (тариф),
  - указать сумму регулярного списания,
  - выбрать периодичность (раз в месяц, раз в N дней и т.п.),
  - указать количество списаний (например, 10 списаний раз в 30 дней).
- Настроить **параметры фискализации**: предмет и способ расчёта для 54‑ФЗ.
- Настроить **уведомления клиенту**:
  - приветственное письмо,
  - напоминания о предстоящем списании,
  - уведомления о неуспешных списаниях.
- Управлять подписчиками:
  - добавить покупателя к подписке,
  - приостановить или отключить подписку,
  - отслеживать историю списаний и ошибок.

### Как это выглядит для покупателя

1. Клиент оформляет заказ и соглашается на подписку (на странице с офертой и условиями автосписаний).
2. Оплачивает первый платёж.
3. Далее суммы списываются автоматически по заданному расписанию, уведомления о списаниях и возможных проблемах приходят на e‑mail.

Покупатель может отписаться от подписки через предусмотренный вами сценарий (ссылка в письме, личный кабинет и т.п.), а вы — отключить его в интерфейсе «Подписок».

---

## Где что лучше использовать

- **Только API.**  
  Если у вас сложный продукт (динамические тарифы, метрики использования, множество планов), удобнее полностью управлять рекуррентами через своё приложение и API Robokassa.

- **Сервис «Подписки».**  
  Если нужно быстро запустить подписочную модель без собственного биллинга: фиксированная сумма и понятное расписание (например, «990 ₽ каждый месяц»).

---

## Подключение рекуррентных платежей

1. В личном кабинете Robokassa подайте заявку на подключение рекуррентных платежей (и сервиса «Подписки», если он вам нужен).  
2. После одобрения:
   - для API‑сценария — реализуйте хранение идентификаторов и вызовы методов рекуррентного списания;
   - для сервиса «Подписки» — создайте один или несколько тарифов и добавьте подписчиков.

Рекуррентные платежи позволяют перевести разовые оплаты в стабильный регулярный доход, при этом Robokassa берёт на себя техническую часть списаний и фискализацию.
